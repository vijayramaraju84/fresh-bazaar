
<div class="main-features" *ngIf="products.length > 0; else loading">
  <!-- Featured Products Slider -->
  <div class="slider-container" *ngIf="featuredProducts.length > 0">
    <button mat-icon-button class="nav-btn prev" (click)="prevSlide()" aria-label="Previous slide">
      <mat-icon>chevron_left</mat-icon>
    </button>
    <div class="slider">
      <div class="slide" *ngFor="let product of featuredProducts; let i = index"
           [@slideAnimation]="i === currentSlideIndex ? 'active' : 'inactive'"
           [class.active]="i === currentSlideIndex">
        <img [src]="product.image" [alt]="product.name" class="slide-image" />
        <div class="slide-content">
          <h3>{{ product.name }}</h3>
          <p *ngIf="product.offer" class="offer">{{ product.offer }}</p>
          <p>₹{{ product.price }}</p>
          <app-add-to-cart-button
            [product]="product"
            buttonText="Add to Cart"
            (added)="onItemAdded()"
            class="slider-add-btn">
          </app-add-to-cart-button>
        </div>
      </div>
    </div>
    <button mat-icon-button class="nav-btn next" (click)="nextSlide()" aria-label="Next slide">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  <!-- Categories Section -->
  <div class="categories-section" *ngIf="categories.length > 0">
    <h2>Explore Categories</h2>
    <div class="categories-grid">
      <a *ngFor="let category of categories"
         [routerLink]="['/products']"
         [queryParams]="{ category: category }"
         class="category-card"
         @cardAnimation>
        <h3>{{ category }}</h3>
      </a>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="products-grid">
    <div *ngFor="let product of filteredProducts" class="product-card" @cardAnimation>
      <img [src]="product.image" alt="{{ product.name }}" class="product-image" />
      <h3>{{ product.name }}</h3>
      <p>₹{{ product.price }}</p>
      <app-add-to-cart-button
        [product]="product"
        buttonText="Add to Cart"
        (added)="onItemAdded()">
      </app-add-to-cart-button>
    </div>
  </div>
</div>

<!-- Loading Template -->
<!-- Loading Template -->
<!-- Loading Template -->
<ng-template #loading>
  <div class="nebula-loader">
    <div class="nebula-spinner"></div>
  </div>
</ng-template>

<!-- Toast Notification -->
<app-toast></app-toast>
